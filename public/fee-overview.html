<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <title>ç¤¾åœ˜è³‡è¨Šé </title>
  <script defer src="club.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <style>
    body {
      background-color: #e9f0f7;
      /* âœ… çµ±ä¸€èƒŒæ™¯é¡è‰² */
    }

    .menu-wrapper:hover .menu-button+div,
    .menu-wrapper.active .menu-button+div {
      display: block !important;
    }

    .menu-item {
      text-decoration: none;
      color: #000000;
    }
    .menu-item:hover {
      background-color: #e5e7eb;
    }
    
    /* ä¸‹æ‹‰é¸å–®é€£çµæ¨£å¼ */
    #menu-member a,
    #menu-asset a,
    #menu-finance a {
      text-decoration: none;
      color: #000000;
    }
    
    #menu-member a:hover,
    #menu-asset a:hover,
    #menu-finance a:hover {
      text-decoration: none;
      color: #000000;
    }
  
  </style>
</head>

<body class="min-h-screen">
  <div class="max-w-6xl mx-auto mt-8 p-6 bg-white rounded-xl shadow relative">

    <!-- âœ… ç¤¾åœ˜é¸å–® -->
    <div id="clubSelector" class="relative inline-block text-left">
      <button id="clubNameButton" type="button"
        class="inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-3 bg-blue-50 text-lg font-bold text-blue-700 hover:bg-blue-100">
        <span id="clubName">è¼‰å…¥ä¸­...</span>
        <i class="bi bi-caret-down-fill text-blue-500 ml-2"></i>
      </button>
      <div id="clubDropdown"
        class="hidden origin-top-left absolute left-0 mt-2 w-64 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50">
        <div class="py-1" id="clubDropdownList"></div>
      </div>
    </div>

    <!-- âœ… åŠŸèƒ½åˆ— -->
    <div class="grid grid-cols-3 gap-4 mt-8">
      <!-- ç¤¾å“¡ç®¡ç† -->
      <div class="menu-wrapper relative" data-menu="menu-member">
        <div
          class="menu-button bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg py-2 px-4 rounded text-center cursor-pointer">
          <i class="bi bi-people-fill mr-2"></i>ç¤¾å“¡ç®¡ç†
        </div>
        <div id="menu-member" class="hidden absolute bg-white border shadow-lg mt-2 rounded z-10 w-64">
          <a href="member-profile.html" class="block px-4 py-2 hover:bg-blue-50"><i
              class="bi bi-person-lines-fill mr-2"></i>ç¤¾å“¡è³‡æ–™é é¢</a>
          <a href="member-list.html" class="block px-4 py-2 hover:bg-blue-50"><i
              class="bi bi-card-list mr-2"></i>ç¤¾å“¡ç¸½è¦½é é¢</a>
          <a href="role-management.html" class="block px-4 py-2 hover:bg-blue-50"><i
              class="bi bi-shield-lock-fill mr-2"></i>è§’è‰²èˆ‡æ¬Šé™ç®¡ç†é </a>
        </div>
      </div>

      <!-- ç¤¾ç”¢ç®¡ç† -->
      <div class="menu-wrapper relative" data-menu="menu-asset">
        <div
          class="menu-button bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg py-2 px-4 rounded text-center cursor-pointer">
          <i class="bi bi-box-seam mr-2"></i>ç¤¾ç”¢ç®¡ç†
        </div>
        <div id="menu-asset" class="hidden absolute bg-white border shadow-lg mt-2 rounded z-10 w-64">
          <a href="assets.html" class="block px-4 py-2 hover:bg-blue-50" id="assetsLink"><i class="bi bi-archive-fill mr-2"></i>ç¤¾ç”¢åˆ—è¡¨</a>
          <a href="borrow-logs.html" class="block px-4 py-2 hover:bg-blue-50" id="borrowLogsLink"><i class="bi bi-journal-check mr-2"></i>å€Ÿé‚„è¨˜éŒ„</a>
        </div>
      </div>

      <!-- è²¡å‹™ç®¡ç† -->
      <div class="menu-wrapper relative" data-menu="menu-finance">
        <div
          class="menu-button bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg py-2 px-4 rounded text-center cursor-pointer">
          <i class="bi bi-cash-coin mr-2"></i>è²¡å‹™ç®¡ç†
        </div>
        <div id="menu-finance" class="hidden absolute bg-white border shadow-lg mt-2 rounded z-10 w-64">
          <!-- æ–°å¢ï¼ç·¨è¼¯è²»ç”¨ -->
          <a href="#" id="menu-fee-edit" class="block px-4 py-2 hover:bg-blue-50">
            <i class="bi bi-pencil-fill mr-2"></i>æ–°å¢ï¼ç·¨è¼¯è²»ç”¨é </a>
          <!-- æŸ¥çœ‹è²»ç”¨ç¸½è¦½ -->
          <a href="fee-overview.html" class="block px-4 py-2 hover:bg-blue-50">
            <i class="bi bi-list-columns-reverse mr-2"></i>æŸ¥çœ‹è²»ç”¨ç¸½è¦½</a>
          <!-- ç™»è¨˜ç¹³è²»ç´€éŒ„ -->
          <a href="#" id="menu-pay-record" class="block px-4 py-2 hover:bg-blue-50">
            <i class="bi bi-journal-plus mr-2"></i>ç™»è¨˜ç¹³è²»ç´€éŒ„</a>
          <!-- ç¹³è²»ç‹€æ…‹æŸ¥è©¢ ğŸ‘‰ æ”¹ç‚º JS ç”¢ç”Ÿ from=club -->
          <a href="#" id="menu-pay-status" class="block px-4 py-2 hover:bg-blue-50">
            <i class="bi bi-bar-chart-fill mr-2"></i>ç¹³è²»ç‹€æ…‹æŸ¥è©¢</a>
          <!-- å€‹äººç¹³è²»ç´€éŒ„ -->
          <a href="personal-payment.html" class="block px-4 py-2 hover:bg-blue-50">
            <i class="bi bi-receipt-cutoff mr-2"></i>å€‹äººç¹³è²»ç´€éŒ„é </a>
        </div>
      </div>
    </div>
  </div>

<head>
    <meta charset="UTF-8">
    <title>è²»ç”¨ç¸½è¦½</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-4">
        <h3 class="mb-3">ğŸ“‹ è²»ç”¨ç¸½è¦½</h3>
        <div class="mb-3">
            <a href="fee-edit.html?from=overview" class="btn btn-success">â• æ–°å¢è²»ç”¨</a>
        </div>

        <table class="table table-bordered bg-white align-middle">
            <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>åç¨±</th>
                    <th>é‡‘é¡</th>
                    <th>æ‡‰ç¹³</th>
                    <th>å·²ç¹³</th>
                    <th>æœªç¹³</th>
                    <th>ç¸½é‡‘é¡</th>
                    <th>æœŸé™</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody id="feeBody"></tbody>
        </table>
    </div>

    <script type="module">
        import { getClubId, apiGet, fmt, setupFinanceMenu } from './finance-common.js';
        const clubId = getClubId();
        const feeBody = document.getElementById('feeBody');

        // è¨­å®šè²¡å‹™ç®¡ç†é¸å–®
        setupFinanceMenu();

        function row(fee, i) {
            return `<tr>
        <td>${i + 1}</td>
        <td>${fee.name}</td>
        <td>${fee.amount}</td>
        <td>${fee.should_pay}</td>
        <td>${fee.paid}</td>
        <td>${fee.unpaid}</td>
        <td>${fee.total_amount}</td>
        <td>${fmt(fee.deadline)}</td>
        <td class="d-grid gap-1">
          <a class="btn btn-sm btn-primary"
             href="payment-status.html?fee=${fee.fee_id}&clubId=${clubId}">ç‹€æ…‹</a>
          <a class="btn btn-sm btn-warning"
             href="fee-edit.html?id=${fee.fee_id}&from=overview&clubId=${clubId}">ç·¨è¼¯</a>
          <a class="btn btn-sm btn-secondary"
             href="payment-record.html?fee=${fee.fee_id}&from=overview&clubId=${clubId}">ç™»è¨˜ç¹³è²»</a>
        </td>
      </tr>`;
        }

        async function load() {
            const list = await apiGet(`/fees?club_id=${clubId}`);
            feeBody.innerHTML = list.map(row).join('');
        }
        load();
    </script>
</body>

</html>